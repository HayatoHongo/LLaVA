AWS LambdaLabs GPU Cloudを使う場合、dockerをインストールしてsudo権限を追加した後、
必ずセッションを再起動、すなわち接続を解除して再接続しないといけない。

ubuntu@132-145-178-224:~/LLaVA$ git config --global user.email "hongo.hayato.6281k@gmail.com"
ubuntu@132-145-178-224:~/LLaVA$ git config --global user.name "HayatoHongo"

---
ファイルシステムへのダウンロード
# Git LFS をインストール
sudo apt-get update
sudo apt-get install git-lfs -y

# Hugging Face データセットを clone
cd /home/ubuntu/llava-virginia
git lfs install
git clone https://huggingface.co/datasets/liuhaotian/LLaVA-CC3M-Pretrain-595K

# ディレクトリに移動
cd LLaVA-CC3M-Pretrain-595K

# images.zip を解凍して images フォルダに展開
mkdir images
unzip images.zip -d images
---

https://github.com/HayatoHongo/LLaVA/
git clone https://github.com/HayatoHongo/LLaVA.git
cd LLaVA/

wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda.sh
bash ~/miniconda.sh # Enter, yes, Enter, Enter
source ~/.bashrc
source ~/miniconda3/etc/profile.d/conda.sh
conda --version
conda create -n llava python=3.10.12 -y

###
#権限エラーが出たら
conda tos accept --override-channels --channel https://repo.anaconda.com/pkgs/main
conda tos accept --override-channels --channel https://repo.anaconda.com/pkgs/r
###

conda activate llava

pip --version # make sure you use pip 25.1
cd LLaVA/
pip install -e .
pip install -e ".[train]"
pip install flash-attn==2.3.4 --no-build-isolation

python -c "import deepspeed; print(deepspeed.__version__)" # make sure you are using deepspeed 0.9.5

mkdir -p ./playground/data/LLaVA-Pretrain/
wget https://huggingface.co/datasets/liuhaotian/LLaVA-Pretrain/resolve/main/blip_laion_cc_sbu_558k.json -O ./playground/data/LLaVA-Pretrain/blip_laion_cc_sbu_558k.json

bash scripts/v1_5/pretrain.sh

bash scripts/v1_5/finetune.sh

